import{g as L}from"./getData-16012ea8.js";import{r as R}from"./RemoveData-bd4d19ab.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{r as _,C as E,c as u,D as z,o as h,d as F,f as a,w as n,F as S,e as M,g as m,G as H,k as U,h as q,H as D}from"./index-c04e0510.js";const p=(g,c)=>{const l=new XMLHttpRequest;l.open("GET",`http://39.98.244.18/api/Manager/GetMed_Info?page=${g}`,!0),l.onload=function(){if(this.status===200){const i=JSON.parse(this.responseText);c(i)}else console.error("请求失败")},l.onerror=function(){console.error("请求出错")},l.send()};const J={class:"header"},O={class:"demo-pagination-block"},X={__name:"drugList",setup(g){const c=_(!1),l=_([]),i=_(""),f=_(0),d=_(!1);L("Med_Count",function(t,e){t?console.error(t):(console.log(typeof Number(e)),f.value=Number(e))});const b=t=>t,C=()=>{d.value=!0,v(1),setTimeout(()=>{D({message:"数据完成刷新.",grouping:!0,type:"success"})},1e3)};p(1,function(t){d.value=!0;for(let e of t){let o={Med_ID:e.med_Id,Med_Name:e.med_Name,Med_Price:e.med_Price,Med_GuiGe:e.med_Desc};setTimeout(()=>{l.value.push(o),d.value=!1},1e3)}});const v=t=>{d.value=!0,setTimeout(()=>{l.value=[],d.value=!1,p(t,function(e){for(let o of e){let s={Med_ID:o.med_Id,Med_Name:o.med_Name,Med_Price:o.med_Price,Med_GuiGe:o.med_Desc};l.value.push(s)}})},800),console.log(`${t} items per page`)},y=t=>{d.value=!0,setTimeout(()=>{l.value=[],d.value=!1,p(t,function(e){for(let o of e){let s={Med_ID:o.med_Id,Med_Name:o.med_Name,Med_Price:o.med_Price,Med_GuiGe:o.med_Desc};l.value.push(s)}})},800),console.log(`current page: ${t}`)},x=(t,e)=>{console.log(t,e)},N=(t,e)=>{console.log(t,e),R(`http://39.98.244.18/api/Manager/Med_Remove?Med_ID=${e.Med_ID}`),D({message:"已删除.",grouping:!0,type:"success"})},k=E(()=>l.value.filter(t=>{var e;return!i.value||((e=t==null?void 0:t.Med_Name)==null?void 0:e.toLowerCase().includes(i.value.toLowerCase()))}));return(t,e)=>{const o=u("el-button"),s=u("el-table-column"),I=u("el-input"),G=u("el-table"),V=u("el-pagination"),w=u("el-card"),T=u("el-dialog"),$=z("loading");return h(),F(S,null,[a(w,{class:"guest-container"},{header:n(()=>[M("div",J,[a(o,{onClick:e[0]||(e[0]=r=>c.value=!0),icon:"Plus",type:"primary"},{default:n(()=>[m(" 添加 ")]),_:1}),a(o,{type:"danger"},{default:n(()=>[m("禁用账户")]),_:1}),a(o,{onClick:C,icon:"RefreshRight",type:"primary",plain:!0},{default:n(()=>[m(" 刷新数据 ")]),_:1})])]),default:n(()=>[H((h(),U(G,{data:q(k),style:{width:"100%"},border:"",size:"default"},{default:n(()=>[a(s,{label:"药品ID",type:"index",index:b()},null,8,["index"]),a(s,{label:"药品名称",prop:"Med_Name"}),a(s,{label:"药品价格",prop:"Med_Price"}),a(s,{label:"药品规格",prop:"Med_GuiGe"}),a(s,{align:"right"},{header:n(()=>[a(I,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=r=>i.value=r),placeholder:"请输入要搜索药品的名称"},null,8,["modelValue"])]),default:n(r=>[a(o,{type:"primary",onClick:P=>x(r.$index,r.row)},{default:n(()=>[m("修改")]),_:2},1032,["onClick"]),a(o,{type:"danger",onClick:P=>N(r.$index,r.row)},{default:n(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,d.value]]),M("div",O,[a(V,{background:"",layout:"total, prev, pager, next",total:f.value,class:"mt-10",onSizeChange:v,onCurrentChange:y,"deprecated-warn":"false"},null,8,["total"])])]),_:1}),a(T,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),title:"学习信息填写"},null,8,["modelValue"])],64)}}},W=B(X,[["__scopeId","data-v-a68f79c6"]]);export{W as default};
